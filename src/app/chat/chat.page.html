<ion-header [translucent]="true">
  <ion-toolbar>
    <ion-buttons slot="start">
      <ion-back-button defaultHref="/tabs/friends"></ion-back-button>
    </ion-buttons>
    <ion-title>Chat con {{ friend?.name }}</ion-title>
  </ion-toolbar>
</ion-header>

<ion-content [fullscreen]="true">
  <ion-card class="card" *ngIf="friend">
    <ion-item>
      <ion-avatar slot="start" class="avatar-large">
        <img [src]="friend.img" />
      </ion-avatar>
      <ion-label class="label-large">
        <h2>{{ friend.name }}</h2>
      </ion-label>
    </ion-item>
  </ion-card>
  <ion-card class="card" *ngFor="let message of conversations">
    <ion-item *ngIf="message.sender != 'You'" class="message-sender">
      <ion-avatar slot="start" class="avatar-small">
        <img [src]="friend.img" />
      </ion-avatar>
      <ion-label class="message-text">{{ message.message }}</ion-label>
    </ion-item>
    <ion-item *ngIf="message.sender === 'You'" class="message-receiver">
      <ion-label class="message-text">{{ message.message }}</ion-label>
    </ion-item>
  </ion-card>
</ion-content>

<ion-toolbar>
  <ion-item>
    <ion-input placeholder="Escribe un mensaje..." [(ngModel)]="newMessage"></ion-input>
    <ion-button color="warning" (click)="sendMessage()">Enviar</ion-button>
  </ion-item>
</ion-toolbar>

<style>
  .card {
    max-width: 80%;
    margin: 10px auto;
    padding: 10px;
    text-align: center;
  }

  .avatar-large {
    width: 70px;
    height: 70px;
  }

  .avatar-large img {
    border-radius: 50%;
  }

  .label-large h2 {
    font-size: 1.5em;
  }

  .message-sender,
  .message-receiver {
    display: flex;
    align-items: center;
    justify-content: flex-start;
  }

  .avatar-small {
    width: 40px;
    height: 40px;
  }

  .avatar-small img {
    border-radius: 50%;
  }

  .message-text {
    font-size: 1.2em;
    word-wrap: break-word;
    margin-left: 10px;
    margin-right: 10px;
  }
</style>